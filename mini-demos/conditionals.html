
<!DOCTYPE html>

<html>
	<head>
		<title>Conditional Generator with Truth Table Checking</title>
		<link rel="stylesheet" href="../css/bootstrap.min.css" />
		<style>
			body	{
				margin:	16px;
			}
			table	{
				margin:	0px;
				border-spacing:	0px;
			}
			tr	{
				background-color:	#fffaff;
				border:	none;
			}
			tr:nth-child(2n+1)	{
				background-color:	#dbdbdb;
			}
			tr:hover	{
				background-color:	#b4c4f4;
			}
			th	{
				min-width:	64px;
				background-color:	#6ab4e6;
				border-top:	1px solid black;
				border-left:	1px solid black;
				border-right:	1px solid black;
				text-align:	center;
			}
			td	{
				min-width:	48px;
				border-left:	0.5px dotted black;
				border-right:	0.5px dotted black;
				border-top:	0.5px solid #101820;
				border-bottom:	0.5px solid #101820;
				text-align:	center;
			}
			
			tr.duplicate	{
				height:	128px;
			}
			
			.fitting	{	width:	75%;	}
			.hidden	{	display:	none;	}
			.cc-true	{	color:	#4d4dff;	}
			.cc-false	{	color:	#ff0000;	}
			.cc-error	{	background-color:	#ffbabe;	}
			.clickable	{	user-select:	none;	}
			.clickable:hover	{	cursor:	pointer;	}
		</style>
	</head>
	
	<body>
		<div class="container">
			<div class="input-stuff">
				<button id="gen" type="button" data-toggle="modal" data-target="#modal-gen">
					Generate Conditional
				</button>
				<input type="text" id="txt" placeholder="if-then statement" style="width:256px;"/>
				<button id="btn">Evaluate Truth Table</button>
				<button id="swap">Logic Keyword Switch</button>
			</div>
			<div id="output"></div>
			<div id="modal-gen" class="modal fade" tabindex="-1" role="dialog">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title">Modal Title</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						
						<div class="modal-body">
							<p>
								<input type="radio" name="sel" id="statements-1" class="hidden" checked />enerate random statement
								<div>
									<div class="row">
										<div class="col-md-4">
											Statement Type:<br/>
											<select id="statement-sel">
												<option data="onlyif" selected>P only if Q</option>
												<option data="if">P if Q</option>
												<option data="iff">P if and only if Q</option>
											</select>
										</div>
										<div class="col-md-4">
											Naming Conventions:<br/>
											<!-- P => Q /-->
											<select class="statement-selections" id="onlyif">
												<option selected>P only if Q</option>
												<option>P => Q</option>
												<option>if P then Q</option>
												<option>P is sufficient for Q</option>
											</select>
											<!-- P <= Q /-->
											<select class="hidden statement-selections" id="if">
												<option selected>P if Q</option>
												<option>P <= Q</option>
												<option>if Q then P</option>
												<option>P is necessary for Q</option>
											</select>
											<!-- P <=> Q /-->
											<select class="hidden statement-selections" id="iff">
												<option selected>P if and only if Q</option>
												<option>P <=> Q</option>
												<option>P iff Q</option>
												<option>P is sufficient and necessary for Q</option>
											</select>
										</div>
										<div class="col-md-4">
											
										</div>
									</div>
								</div>
							</p>
							<!--
							<p>
								<input type="radio" name="sel" id="statements-2" /> Generate statement
								<div>
									<div class="row">
										<div class="col-md-3">
											Statement Type:<br/>
											<select id="statement-sel-2">
												<option data="onlyif" selected>P only if Q</option>
												<option data="if">P if Q</option>
												<option data="iff">P if and only if Q</option>
											</select>
										</div>
										<div class="col-md-3">
											Naming Conventions:<br/>
											<!-- P => Q /--><!--
											<select class="statement-selections-2" id="onlyif-2">
												<option selected>P only if Q</option>
												<option>P => Q</option>
												<option>if P then Q</option>
												<option>P is sufficient for Q</option>
											</select>
											<!-- P <= Q /--><!--
											<select class="hidden statement-selections-2" id="if-2">
												<option selected>P if Q</option>
												<option>P <= Q</option>
												<option>if Q then P</option>
												<option>P is necessary for Q</option>
											</select>
											<!-- P <=> Q /--><!--
											<select class="hidden statement-selections-2" id="iff-2">
												<option selected>P if and only if Q</option>
												<option>P <=> Q</option>
												<option>P iff Q</option>
												<option>P is sufficient and necessary for Q</option>
											</select>
										</div>
										<div class="col-md-3">
											P:&emsp;<input type="text" id="p" class="fitting" />
										</div>
										<div class="col-md-3">
											Q:&emsp;<input type="text" id="q" class="fitting" />
										</div>
									</div>
								</div>
							</p><!--/-->
						</div>
						
						<div class="modal-footer">
							<button type="button" class="btn btn-primary" id="generate-statement">Generate</button>
							<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
						</div>
						
					</div>
				</div>
			</div>
		</div>
		<script src="../js/jquery.js"></script>
		<script src="../js/bootstrap.min.js"></script>
		<script src="../js/PAML.js"></script>
		<script type="text/javascript">
			// Variables
			let	txt=	document.getElementById("txt");
			let	btn=	document.getElementById("btn");
			let	output=	document.getElementById("output");
			let	swap=	document.getElementById("swap");
			let	gen=	document.getElementById("gen");
			let	table=	false;
			let	hypothesis=	[
				"P"/*,
				"integer n is a multiple of 6",
				"\u03c0^2 > 2",
				"\u03c0^2 > 2",
				"x > 2"*/
			];
			let	conclusion=	[
				"Q"/*,
				"it is divisble by 2",
				"\u03c0 > 1.2",
				"\u03c0 = 0",
				"x^2  > 4"*/
			];
			let	statements=	[
				function(p, q)	{	return "if "+p+" then "+q;	},
				function(p, q)	{	return p+" implies "+q;	},
				function(p, q)	{	return p+" only if "+q;	},
				function(p, q)	{	return p+" iff "+q;	},
				function(p, q)	{	return p+" => "+q;	},
				function(p, q)	{	return p+" <= "+q;	},
				function(p, q)	{	return p+" if and only if "+q;	},
				function(p, q)	{	return p+" <=> "+q;	},
				function(p, q)	{	return p+" is sufficient for "+q;	},
				function(p, q)	{	return p+" is necessary for "+q;	},
				function(p, q)	{	return p+" is necessary and sufficient for "+q;	},
				function(p, q)	{	return p+" is sufficient and necessary for "+q;	}
			];
			
			btn.addEventListener("click", function()	{
				if(txt.value== "")
					return;
				
				// Variables
				let	p=	PAML.createConditionTree(txt.value);
				let	q=	p.rebuild();
				let	t=	PAML.createTruthTable(p, q);
				let	d, q;
				
				output.innerHTML=	"";
				output.append(t.toStudentVersionHTML());
				d=	document.getElementsByClassName("duplicate");
				for(let i= d.length-1; i>= 0; i--)	{
					d[i].remove();
				}
				q=	document.getElementsByClassName("table-2");
				for(let i= 0; i< q.length; i++)	{
					q[i].classList.add("hidden");
				}
			});
			
			swap.addEventListener("click", function()	{
				if(output.innerHTML== "")
					return;
				// Variables
				let	t1=	document.getElementsByClassName("table-1");
				let	t2=	document.getElementsByClassName("table-2");
				let	len=	t1.length;
				
				for(let i= 0; i< len; i++)	{
					if(table)	{
						t1[i].classList.remove("hidden");
						t2[i].classList.add("hidden");
					}
					else	{
						t2[i].classList.remove("hidden");
						t1[i].classList.add("hidden");
					}
				}
				table=	!table;
			});
			
			$("#statement-sel").change(function(args)	{
				// Variables
				let	s=	"#"+$(args.target).find(":selected").attr("data");
				$(".statement-selections").each(function(i, elem)	{
					console.log(i, elem);
					elem.classList.add("hidden");
				});
				$(s).removeClass("hidden");
			});
			
			$("#statement-sel-2").change(function(args)	{
				// Variables
				let	s=	"#"+$(args.target).find(":selected").attr("data")+"-2";
				$(".statement-selections-2").each(function(i, elem)	{
					console.log(i, elem);
					elem.classList.add("hidden");
				});
				$(s).removeClass("hidden");
			});
			
			let	pqs=	[
				{p:"A", q:"B"},
				{p:"being continuous", q:"a function to be integrable"},
				{p:"the matrix A is invertible", q:"determinant(A) does not equal 0"},
				{p:"f is invertible", q:"f is invertible"},
				{p:"if square root (x) is irrational", q:"x is prime"}
			];
			
			$("#generate-statement").click(function(args)	{
				// Variables
				let	c=	$("input:checked[type=radio][name=sel]")[0].id;
				
				switch(c)	{
					case "statements-1":	{
						// Variables
						let	s=	$(".statement-selections:not(.hidden) option:selected").val();
						let	p=	Math.floor(Math.random()*pqs.length);
						let	q=	pqs[p].q;
						
						p=	pqs[p].p;
						s=	s.replace("P", p).replace("Q", q);
						
						txt.value=	s;
						$("#modal-gen").modal("hide");
					}break;
				}
			});
		</script>
	</body>
</html>