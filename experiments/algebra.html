<!-- Created by Paul Gonzalez Becerra /-->

<!DOCTYPE html>

<html>
	<head>
		<!-- BEGIN:Head; /-->
		<title>pgonzbecer</title>
		<link rel="stylesheet" href="../css/bootstrap.css">
		<link rel="stylesheet" href="../css/main.css">
		<link rel="icon" type="x-icon" href="../images/favicon.ico"/>
		<!-- END:Head; /-->
		
		<style>
			#output
			{
				color:	#fff4ff;
				font-style:	italic;
				font-size:	16px;
			}
			
			.coefficient
			{
				color:	orange;
			}
			
			.variable
			{
				color:	#90ffd4;
			}s
		</style>
		<script type="text/javascript">
			var	algebra=	{
				currEq:	null,
				parseEquation:	function(str)	{
					currEq=	new EquationSpot(str);
				}
			};
			
			function EquationSpot(str)	{
				// Variables
				this.coefficient=	0;
				this.variables=	[];
				this.bFoundCoefficient=	false;
				
				grabCoefficient(str);
				grabVariables(str);
				
				function grabCoefficient(pmStr)	{
					// Variables
					var	cs=	[];
					var	c=	0;
					var h=	-1;
					var	k=	-1;
					
					while(true)
					{
						c=	pmStr.charCodeAt(h);
						if(c>= 48 && c<= 57 && k== -1)
							k=	h;
						if((c< 48 || c> 57) && k!= -1)
						{
							cs.push(parseFloat(pmStr.substring(k, h)));
							k=	-1;
						}
						h++;
						
						if(h>= pmStr.length && k!= -1)
						{
							cs.push(parseFloat(pmStr.substring(k, h)));
							break;
						}
						if(h>= pmStr.length)
							break;
					}
					if(cs.length!= 0)
						this.coefficient=	1;
					else
						this.bFoundCoefficient=	true;
					for(h= 0; h< cs.length; h++)
						this.coefficient*=	cs[h];
				}
				
				function grabVariables(pmStr)	{
					// Variables
					var	vs=	[];
					var	c=	0;
					var	h=	-1;
					var	k=	0;
					
					while(true)
					{
						c=	pmStr.charCodeAt(h);
						if(((c>= 65 && c<= 90) || (c>= 97 && c<= 122)) && k== -1)
							k=	h;
						if((c< 65 || c> 90) && (c< 97 || c> 122) && k!= -1)
						{
							vs.push(pmStr.substring(k, h));
							k=	-1;
						}
						h++;
						if(h>= pmStr.length && k!= -1)
						{
							vs.push(pmStr.substring(k, h));
							break;
						}
						if(h>= pmStr.length)
							break;
					}
					if(vs.length!= 0)
					{
						console.log(vs);
						if(!this.bFoundCoefficient)
							this.coefficient=	1;
						vs=	findSpecialVariables(vs);
						console.log(vs);
						this.variables=	vs;
					}
				}
				
				function findSpecialVariables(vs)	{
					for(var i= 0; i< vs.length; i++)
					{
						vs[i]=	locateSpecialCoefficients(vs[i],[
							{
								name:	"pi",
								value:	3.14159
							},
							{
								name:	"e",
								value:	2.71828
							}
						]);
					}
					
					return vs;
				}
				
				function locateSpecialCoefficients(pmStr, specials)	{
					// Variables
					var	index=	0;
					
					for(var i= 0; i< specials.length; i++)
					{
						while(true)
						{
							index=	pmStr.indexOf(specials[i].name);
							if(index== -1)
								break;
							pmStr=	pmStr.substring(0, index)+pmStr.substring(index+specials[i].name.length);
							this.coefficient*=	specials[i].value;
						}
					}
					
					return pmStr;
				}
			}
			
			window.addEventListener("load", function(){
				document.getElementById("input").addEventListener("keyup", function(args)
				{
					document.getElementById("output").innerHTML=	algebra.parseEquation(args.target.value);
				});
			});
			
			function parseEquation(str)
			{
				// Variables
				var	h=	0;
				var	kCoefficient=	-1;
				var	c=	0;
				var	a=	[];
				
				while(true)
				{
					c=	str.charCodeAt(h);
					
					if(c>= 48 && c<= 57 && kCoefficient== -1)
						kCoefficient=	h;
					if((c< 48 || c> 57) && kCoefficient!= -1)
					{
						a.push({
							start:	kCoefficient,
							end:	h,
							type:	"coefficient"
						});
						kCoefficient=	-1;
					}
					if(((c>= 65 && c<= 90) || (c>= 97 && c<= 122)))
					{
						a.push({
							start:	h,
							end:	h+1,
							type:	"variable"
						});
					}
					h++;
					
					if(h>= str.length && kCoefficient!= -1)
					{
						a.push({
							start:	kCoefficient,
							end: h,
							type:	"coefficient"
						});
						break;
					}
					if(h>= str.length)
						break;
				}
				
				try
				{
					for(var i= a.length-1; i>= 0; i--)
					{
						str=	str.substring(0, a[i].start)+"<span class='"+a[i].type+"'>"+str.substring(a[i].start, a[i].end)+"</span>"+str.substring(a[i].end);
					}
				}catch(e){console.log(e);}
				
				return str;
			}
		</script>
	</head>
	
	<body>
		<!-- BEGIN:Nav-Update; /-->
		<nav class="navbarc">
			<span class="logo">pgonzbecer</span>
			<span class="collapsible navbarc-right">
				<span class="items">
					<a href="contact.html">About / Contact Me</a>
					<a href="docs.html">API Documentation</a>
					<a href="portfolio.html">Projects &amp; Portfolio</a>
					<a href="index.html">Home</a>
				</span>
			</span>
			<div style="clear:both;"></div>
		</nav>
		<!-- END:Nav-Update; /-->
		
		<div id="content-tabs">
			<!--<span class="tab" name="test-1">TEST_TAB_1</span>/-->
		</div>
		
		<div style="clear:both;"></div>
		
		<div id="content">
			<div class="tabcontent visible" name="eq">
				<center>
					<span class="h3">Type in an algebraic equation</span>
					<br /><br />
					<input type="text" id="input" placeholder="y=25x-44" style="color:#101820;"/>
					<br /><br />
					<output id="output">
						<span class="variable">y</span>=
						<span class="coefficient">25</span><span class="variable">x</span>
						-
						<span class="coefficient">44</span>
					</output>
				</center>
			</div>
		</div>
		
		<!-- BEGIN:Footer; /-->
		<footer>
			Copyright Paul Gonzalez-Becerra 2015.
		</footer>
		<!-- END:Footer; /-->
	</body>
</html>

<!-- End of File /-->